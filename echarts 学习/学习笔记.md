

# Echarts 快速上手

1. 引入 echarts.js 文件
2. 准备一个呈现图表的盒子
3. 初始化echarts实例对象
4. 准备配置项
5. 将配置项设置给echarts实例对象

```html
<div style='width: 600px; height: 400px;'></div>
<script src="./lib/echarts.js"></script>
<script>
  // 基于准备好的dom，初始化echarts实例
  let myChart = echarts.init(document.querySelector('div'));
  // 指定图表的配置项和数据
  let option = {
    title:{
      text:'ECharts 入门实例',
      link:'https://jiaqicoder.com',
      textStyle:{
        color:'pink',
        fontStyle:'normal'
      }
    },
    xAxis:{
      type:'category', // 类目轴
      data:['衬衫','羊毛衫','雪纺衫','裤子'] 
    },
    yAxis:{
      type:'value', // 数值轴
    },
    series:[{
      name:'销量',
      type:'bar', //line pie
      data:[5,10,15,20]
    }]
  }
    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);
</script>
```

相关配置：

- xAxis：直接坐标系中的x轴
- yAxis：直角坐标系中的y轴
- series：系列列表。每个系列通过type决定自己的图表类型
- [title]([Documentation - Apache ECharts](https://echarts.apache.org/zh/option.html#title))：标题组件，包含主标题和副标题。

![image-20210924105806030](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241614890.png)

# 通用配置

通用配置指的就是任何图表都能使用的配置。

## 标题 title

- 文字样式

  ```js
  title:{
    text:'成绩展示',
    textStyle:{
      color:'red',
      fontSize:'28px',
      fontWeight:800,
    },
  },
  ```

- 标题边框

  ```js
  borderWidth:5,
  borderColor:'blue',
  borderRadius:5
  ```

- 标题位置

  ```js
  title:{
    text:'成绩展示',
    textStyle:{
      color:'red',
      fontSize:'28px'
    },
  borderWidth:5,
  borderColor:'blue',
  borderRadius:5,
  left:100,
  top:20,
  },
  ```

  `top` 的值可以是像 `20` 这样的具体像素值，可以是像 `'20%'` 这样相对于容器高宽的百分比，也可以是 `'top'`, `'middle'`, `'bottom'`。

  如果 `top` 的值为`'top'`, `'middle'`, `'bottom'`，组件会根据相应的位置自动对齐。

## 提示 tooltip

tooltip：提示框组件，用于配置鼠标滑过或者点击图表时的显示框。

- 触发类型：trigger （可选）

  - `'item'`

    数据项图形触发，主要在散点图，饼图等无类目轴的图表中使用。

  - `'axis'`

    坐标轴触发，主要在柱状图，折线图等会使用类目轴的图表中使用。

  - `'none'`

    什么都不触发。

- 触发时机：triggerOn （可选）

  - `'mousemove'`

    鼠标移动时触发。

  - `'click'`

    鼠标点击时触发。

  - `'mousemove|click'`

    同时鼠标移动和点击时触发。

- 格式化：formatter

  提示框浮层内容格式器，支持字符串模板和回调函数两种形式。

  字符串模板：

  模板变量有 `{a}`, `{b}`，`{c}`，`{d}`，`{e}`，分别表示系列名，数据名，数据值等。 在 [trigger](https://echarts.apache.org/zh/option.html#tooltip.trigger) 为 `'axis'` 的时候，会有多个系列的数据，此时可以通过 `{a0}`, `{a1}`, `{a2}` 这种后面加索引的方式表示系列的索引。 不同图表类型下的 `{a}`，`{b}`，`{c}`，`{d}` 含义不一样。 其中变量`{a}`, `{b}`, `{c}`, `{d}`在不同图表类型下代表数据含义为：

  - 折线（区域）图、柱状（条形）图、K线图 : `{a}`（系列名称），`{b}`（类目值），`{c}`（数值）, `{d}`（无）
  - 散点图（气泡）图 : `{a}`（系列名称），`{b}`（数据名称），`{c}`（数值数组）, `{d}`（无）
  - 地图 : `{a}`（系列名称），`{b}`（区域名称），`{c}`（合并数值）, `{d}`（无）
  - 饼图、仪表盘、漏斗图: `{a}`（系列名称），`{b}`（数据项名称），`{c}`（数值）, `{d}`（百分比）

  ```js
  tooltip:{
    trigger:'axis',// 'item'
    triggerOn:'click',
    formatter:'{b} 的成绩是 {c}', //{b}（类目值），{c}（数值）
  }
  ```

  -----

  回调函数格式：

  支持返回 HTML 字符串或者创建的 DOM 实例。

  第一个参数 `arg` 是 formatter 需要的数据集

  ```js
  tooltip:{
    trigger:'axis',// 'item'
    triggerOn:'click',
    formatter:function(arg){
      console.log(arg); // 可以打印看看 有什么值
      return `${arg[0].name}的分数是 ${arg[0].data}`; // 返回值将会呈现在页面中
    }
  },
  ```

## 工具按钮 toolbox

内置有导出图片，数据视图，动态类型切换,数据区域缩放，重置五个工具。

```js
toolbox:{
  feature:{
    saveAsImage:{}, // 保存为图片
    dataView:{}, //数据视图
    restore:{}, // 重置功能
    dataZoom:{}, // 区域缩放
    magicType:{
      type:['line','bar']    // 切换图表类型
    }
  }
},
```

![image-20210924143614282](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615720.png)



## 图例 legend

legend：图例，用于筛选系列，需要和series配合使用。

- legend中的 data是一个数组
- legend中的data的值需要和series数组中某组数据的name值一致

```js
series: [
  {
    name: '语文成绩',
    type: 'bar',
    data: [98, 88, 78, 80]
  },{
    name:'数学成绩',
    data:[42,55,99,88],
    type:'bar'
  }
],
legend:{
  data:['语文成绩','数学成绩'], // 如果series中的name有值时，legend中的data可以不写
}
```

![image-20210924151308211](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615448.png)

![image-20210924151320748](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615889.png)



# ECharts的常用图表

- 柱状图 bar
- 折线图
- 散点图
- 饼图
- 地图
- 雷达图
- 仪表盘图

## 柱状图

### 实现步骤

- ECharts 最基本的代码结构：

  引入js文件，设置DOM容器，初始化对象，设置options

- x轴数据：

  数据1：['张三','李四','王五','赵六']

- y轴数据：

  数据2：[88,92,79,79]

- 图表类型：

  在series下设置 type:bar

```html
<body>
  <div style="width: 600px;height: 400px;"></div>
  <script src="./lib/echarts.js"></script>
  <script>

    let myCharts = echarts.init(document.querySelector('div'));
    myCharts.setOption({
      title: {
        text:'成绩'
      },
      xAxis: {
        type: 'category',
        data: ['张三','李四','王五','赵六']
      },
      yAxis: {
        type: 'value'
      },
      series: [{
        name: '成绩',
        data: [5, 10, 15, 20],
        type: 'bar'
      }],
    });
  </script>
</body>
```

### 常见效果

-  标记：

  - 最大值 最小值（用markPoint来标记点）

    ```js
    series: [{
      name: '成绩',
      data: [5, 10, 15, 20],
      type: 'bar',
      markPoint:{
        data:[{
          type:'max',
          name:'最大值'
        },{
          type:'min',
          name:'最小值'
        }]
      }
    }]
    ```

    ![image-20210924114001186](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615217.png)

  

  -  平均值(markLine)

    ```js
    series: [{
      name: '成绩',
      data: [5, 10, 15, 20],
      type: 'bar',
      markPoint:{
        data:[{
          type:'max',
          name:'最大值'
        },{
          type:'min',
          name:'最小值'
        }]
      },
      markLine:{
        data:[
          {
            type:'average',name:'平均值'
          }
        ]
      }
    }],
    ```

    ![image-20210924114211478](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615232.png)

- 显示：

  - 数值显示(label)

    ```js
    series: [{
      name: '成绩',
      data: [5, 10, 15, 20],
      type: 'bar',
      markPoint:{
        data:[{
          type:'max',
          name:'最大值'
        },{
          type:'min',
          name:'最小值'
        }]
      },
      markLine:{
        data:[
          {
            type:'average',name:'平均值'
          }
        ]
      },
      label:{
        show:true,
      }
    }],
    ```

    

    ![image-20210924114641529](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615544.png)

  - 柱宽度(barWidth)

    ```js
    series: [{
      name: '成绩',
      data: [5, 10, 15, 20],
      type: 'bar',
      markPoint:{
        data:[{
          type:'max',
          name:'最大值'
        },{
          type:'min',
          name:'最小值'
        }]
      },
      markLine:{
        data:[
          {
            type:'average',name:'平均值'
          }
        ]
      },
      label:{
        show:true,
        position:'inside'
      },
      barWidth:'50%' // 调整为默认宽度的50%
    }],
    ```

    

  - 横向柱状图

    将柱状图变为横向的：

    ```js
    xAxis: {
      type: 'value'
    },
    yAxis: {
      data: ['张三', '李四', '王五', '赵六'],
      type: 'category',
    }
    ```

    ![image-20210924115428763](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615320.png)

## 折线图

### 实现步骤

- ECharts 最基本的代码结构：

  引入js文件，设置DOM容器，初始化对象，设置options

- x轴数据：

  数据1：['1月','2月','3月','4月','5月','6月']

- y轴数据：

  数据2：[88,92,79,79,39,99]

- 图表类型：

  在series下设置 type: line

```js
let myChart = echarts.init(document.querySelector('div'));
myChart.setOption({
  title:{
    text:'康师傅方便面销量',
    textStyle:{
      color:'blue'
    }
  },
  xAxis:{
    data:['1月','2月','3月','4月','5月','6月'],
    type:'category'
  },
  yAxis:{
    type:'value',
  },
  series:{
    name:'康师傅的销量',
    type:'line',
    data:[35,29,38,88,69,89],
  },
  tooltip:{
    trigger:'item',
    formatter:'{b}的销量为{c}'
  }
})
```

### 常见的效果

- 标记

  - 最大值 最小值 markPoint

    ```js
    series:{
      name:'康师傅的销量',
      type:'line',
      data:[35,29,38,88,69,89],
      markPoint:{
        data:[
          {type:'max'},
          {type:'min'}
        ]
      },
    },
    ```

  - 平均值 markLine

    ```js
    series:{
      name:'康师傅的销量',
      type:'line',
      data:[35,29,38,88,69,89],
      markPoint:{
        data:[
          {type:'max'},
          {type:'min'}
        ]
      },
      markLine:{
        data:[
          {type:'average'}
        ]
      }
    }
    ```

    ![image-20210924153332983](C:\Users\singhand\AppData\Roaming\Typora\typora-user-images\image-20210924153332983.png)

  - 标注区间 markArea

    ```js
    series:{
      name:'康师傅的销量',
      type:'line',
      data:[35,29,38,88,69,89],
      markPoint:{
        data:[
          {type:'max'},
          {type:'min'}
        ]
      },
      markLine:{
        data:[
          {type:'average'}
        ]
      },
      markArea:{
        data:[
          [
            {xAxis:'1月'}, // 开始月份
            {xAxis:'2月'}, // 结束月份
          ],
          [
            {xAxis:'3月'}, // 开始月份
            {xAxis:'5月'}, // 结束月份
          ],
        ]
      }
    },
    ```
  
    ![image-20210924160114696](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241615129.png)
  
  

- 线条控制：

  - 平滑 smooth

    ```js
    series:{
      name:'康师傅的销量',
      type:'line',
      data:[35,29,38,88,69,89],
      smooth:true
    },
    ```

    

    ![image-20210924161756384](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241617419.png)

  - 线条样式 lineStyle

    ```js
    series:{
      name:'康师傅的销量',
      type:'line',
      data:[35,29,38,88,69,89],
      smooth:true,
      lineStyle:{
        color:'green',
        type:'dotted', //solid dashed
      }
    },
    ```

    

  - 填充风格 areaStyle

    注意和markArea的区别。

    ```js
    series:{
      name:'康师傅的销量',
      type:'line',
      data:[35,29,38,88,69,89],
      smooth:true,
      lineStyle:{
        color:'green',
        type:'dotted', //solid dashed
      },
      areaStyle:{
        color:'pink'
      }
    },
    ```

    ![image-20210924162815962](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241628999.png)

    全部代码：[A Pen by liujiaqi222 (codepen.io)](https://codepen.io/liujiaqi222/pen/gORdQeo)
  
  - 紧挨边缘 boundaryGap
  
    默认和边缘是存在距离的，注意此时bundaryGap的是放在 xAxis中的。
  
    ![image-20210924164058998](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241640031.png)
  
    ```js
    xAxis: {
      data: ['1月', '2月', '3月', '4月', '5月', '6月'],
      type: 'category',
      boundaryGap:false, // 设置为无间隙
    },
    ```
  
    ![image-20210924164443113](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241644145.png)
  
    
  
  - 脱离0值比例缩放 scale
  
    如果数值相差无几，且数值较大，此时发现y轴的坐标依旧从0开始。
  
    ![image-20210924164917454](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241649496.png)
  
    此时，就可以将scale属性的值设置为true，允许坐标轴缩放。
  
    ```js
    yAxis: {
      type: 'value',
      scale:true
    },
    ```
  
    ![image-20210924165202333](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241652365.png)
  
  - 堆叠图 （stack的属性值要设置为相同的）
  
    如果两条不同的线，他们的数值波动较大就会出现如下的重叠情况，此时容易让人眼花缭乱。
  
    ![image-20210924170852203](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241708239.png)
  
    因此可以将两条线的stack属性值设置为同一个值（任意设置），此时第一条仍然为第一条线，第二条线则为原来两条线的总和（叠加）。
  
    ```js
    series: [{
      name: '康师傅的销量',
      type: 'line',
      data: [3091, 900, 300, 2006, 1510, 1813],
      stack: 'all',
      // stack属性值相同的serie，后面的serie的值将会叠加在前一个serie的值
      // 第二条线
    }, {
    
      name: '',
      type: 'line',
      data: [2000, 2328, 3282, 230, 1889, 1123],
      stack: 'all',
    }],
    ```
  
    ![image-20210924171151354](https://gitee.com/zyxbj/image-warehouse/raw/master/pics/202109241711386.png)
  
    
  

## 散点图

散点图可以帮助我们推断变量间的相关性。

### 实现步骤

- 引入js文件，创建DOM容器，初始化对象，设置option

- x轴数据和y轴的数据：二维数组

  数组1：[[身高1,体重1],[身高2,体重2],[身高3,体重3]]

- 图表类型：

  在series下设置type:scatter

  **xAxis和yAxis的type都要设置为value**

###  常见的效果

- 气泡图效果不同
  - 散点的大小不同
  - 散点的颜色不同
- 涟漪动画效果

